(function(t){function e(e){for(var n,a,r=e[0],c=e[1],h=e[2],d=0,u=[];d<r.length;d++)a=r[d],o[a]&&u.push(o[a][0]),o[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(u.length)u.shift()();return s.push.apply(s,h||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,r=1;r<i.length;r++){var c=i[r];0!==o[c]&&(n=!1)}n&&(s.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},o={app:0},s=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var h=0;h<r.length;h++)e(r[h]);var l=c;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var n=i("9e74"),o=i.n(n);o.a},1:function(t,e){},2:function(t,e){},3:function(t,e){},"33a1":function(t,e,i){},"41f1":function(t,e,i){"use strict";var n=i("33a1"),o=i.n(n);o.a},"56d7":function(t,e,i){"use strict";i.r(e);i("dac5"),i("6e26"),i("9604"),i("df67");var n=i("6e6d"),o=i("5a4b"),s=i("0e4e"),a=i("9535"),r=i.n(a),c=i("8a2b"),h=i.n(c),l=i("ce0f"),d=i.n(l),u=(i("6aa2"),i("508f"),i("1733"),i("1a74"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)}),f=[],p={components:{},data:function(){return{}},computed:{},methods:{},mounted:function(){}},g=p,m=(i("034f"),i("17cc")),y=Object(m["a"])(g,u,f,!1,null,null,null),v=y.exports,k=i("1e6f"),b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:t.onContainerResize,expression:"onContainerResize"}],staticClass:"container"},[i("FEEditor"),i("div")],1)},x=[],w=i("ab10"),C=i.n(w),z=(i("ecc0"),i("123e"),i("0a67"),i("9a62")),j=i.n(z),S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],staticClass:"frontend"},[i("Layout",{staticClass:"layout-con"},[i("sider",{attrs:{collapsible:"","hide-trigger":"","collapsed-width":36},model:{value:t.isCollapsed,callback:function(e){t.isCollapsed=e},expression:"isCollapsed"}},[i("Menu",{class:t.menuitemClasses,attrs:{theme:"dark",width:"auto"},on:{"on-select":t.selectNavMenu}},[i("MenuItem",{attrs:{name:"search"}},[i("Tooltip",{attrs:{content:"Search element",placement:"right"}},[i("Icon",{attrs:{type:"md-search"}})],1)],1),i("MenuItem",{attrs:{name:"document"}},[i("Tooltip",{attrs:{content:"Open Text Editor",placement:"right"}},[i("Icon",{attrs:{type:"md-list"}})],1)],1),i("MenuItem",{attrs:{name:"refresh"}},[i("Tooltip",{attrs:{content:"Reload Wxml file",placement:"right"}},[i("Icon",{attrs:{type:"md-open"}})],1)],1),t.scene.debug?i("MenuItem",{attrs:{name:"debug"}},[i("Tooltip",{attrs:{content:"Debug",placement:"right"}},[i("Icon",{attrs:{type:"md-create"}})],1)],1):t._e(),i("MenuItem",{attrs:{name:"about"}},[i("Tooltip",{attrs:{content:"About",placement:"right"}},[i("Icon",{attrs:{type:"md-at"}})],1)],1)],1)],1),i("Layout",[i("Content",[i("div",{attrs:{id:"scene"}})])],1)],1),i("div",{staticClass:"editor-button"},[i("Tooltip",{attrs:{placement:"bottom",content:"Zoom Out",delay:1e3}},[i("Button",{attrs:{shape:"circle",icon:"md-remove"},on:{click:t.zoomOut}})],1),i("Tooltip",{attrs:{placement:"bottom",content:"Zoom In",delay:1e3}},[i("Button",{attrs:{shape:"circle",icon:"md-add"},on:{click:t.zoomIn}})],1),i("Tooltip",{attrs:{placement:"bottom",content:"Reset Canvas",delay:1e3}},[i("Button",{attrs:{shape:"circle",icon:"md-refresh"},on:{click:t.reset}})],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogs.search.visible,expression:"dialogs.search.visible"}],staticClass:"editor-search"},[i("Input",{staticStyle:{width:"260px"},attrs:{type:"text",search:!0,placeholder:"Search"},on:{"on-change":t.searchDocument},model:{value:t.dialogs.search.form.key,callback:function(e){t.$set(t.dialogs.search.form,"key",e)},expression:"dialogs.search.form.key"}}),i("span",[t._v(t._s(t.dialogs.search.form.status))]),i("CheckboxGroup",{staticStyle:{display:"inline"},on:{"on-change":t.changeSearchTypes},model:{value:t.dialogs.search.form.types,callback:function(e){t.$set(t.dialogs.search.form,"types",e)},expression:"dialogs.search.form.types"}},t._l(t.dialogs.search.types,function(e){return i("Checkbox",{attrs:{label:e.name}},[t._v(t._s(e.title))])}),1),i("Button",{attrs:{shape:"circle",size:"small",icon:"md-arrow-back"},on:{click:t.previousSearch}}),i("Button",{attrs:{shape:"circle",size:"small",icon:"md-arrow-forward"},on:{click:t.nextSearch}}),i("Icon",{attrs:{type:"ios-close",size:"24",color:"rgba(255,255,255,.7)"},on:{click:t.handleCloseSearch}})],1),i("Drawer",{attrs:{title:"Script Editor",width:"1024",closable:!1},model:{value:t.scriptEditor.visible,callback:function(e){t.$set(t.scriptEditor,"visible",e)},expression:"scriptEditor.visible"}},[i("ButtonGroup",{staticClass:"code-button"},[i("Button",{attrs:{icon:"md-create"},on:{click:t.updateDebugScript}},[t._v("Update")])],1),i("codemirror",{ref:"code",attrs:{options:t.scriptEditor.options},model:{value:t.scriptEditor.code,callback:function(e){t.$set(t.scriptEditor,"code",e)},expression:"scriptEditor.code"}})],1),i("Modal",{attrs:{styles:{top:"20px"},title:"About"},model:{value:t.dialogs.about.visible,callback:function(e){t.$set(t.dialogs.about,"visible",e)},expression:"dialogs.about.visible"}},[i("Row",[i("Col",{attrs:{span:"12"}},[i("h3",[t._v(t._s(t.dialogs.about.form.title))]),i("p",[i("Tag",{attrs:{color:"error"}},[t._v(t._s(t.dialogs.about.form.version))])],1)]),i("Col",{attrs:{span:"12"}},[i("p",[t._v(t._s(t.dialogs.about.form.desc))]),i("p",[i("Tag",{attrs:{color:"geekblue"}},[t._v("Author")]),t._v(t._s(t.dialogs.about.form.author))],1),i("p",[i("Tag",{attrs:{color:"geekblue"}},[t._v("Email")]),t._v(t._s(t.dialogs.about.form.email))],1)])],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"success",size:"large"},on:{click:function(e){t.dialogs.about.visible=!1}}},[t._v("OK")])],1)],1)],1)},O=[],M=(i("34a3"),i("55a0"),i("7bc1"),i("1107"),i("5d24"),i("7364"),i("0eb5"),i("a4c5"),i("f763"),i("111f"),i("3c9a")),B=i("eefc"),P=i("a154"),_=i.n(P),E=i("8778"),W=i.n(E),L={dragDistance:40,dropFill:"#ddd",element:{minWidth:160,minHeight:50,margin:10,space:6,highlight:"#EE82EE",maxWidth:800},text:{minWidth:20,minHeight:20,fontSize:12,fontFamily:"Calibri",highlight:"#EE82EE"},comment:{minWidth:20,minHeight:20,fontSize:12,fontFamily:"Calibri",highlight:"#EE82EE"},property:{minWidth:40,minHeight:16,fontSize:12,minValueWidth:20,fontFamily:"Calibri",highlight:"#EE82EE"},holder:{minWidth:60,minHeight:16},svg:{baseSize:1024,default:"M290.306439 218.184864c0-2.815969-1.087988-90.495005 20.671773-117.438708 22.015758-27.519697 85.055064-63.039307 85.055064-63.039307s71.935209-44.735508 85.183063-36.671597C494.656191 8.971165 492.352216 95.626212 492.352216 95.626212s-0.639993 85.631058-14.52784 110.334786C464.000528 230.600727 392.00132 273.672253 392.00132 273.672253s-63.039307 41.151547-84.671069 40.319556C286.082485 313.223818 290.242439 221.192831 290.306439 218.184864zM334.145956 656.388043c0.511994 15.551829 77.055152 56.127383 77.055152 56.127383s75.263172 41.343545 103.358863 41.343545c28.351688 0 101.054888-41.599542 101.054888-41.599542s66.815265-34.815617 76.735156-54.015406c9.727893-18.943792-72.639201-60.415335-75.263172-61.887319C614.654871 594.948719 538.687706 551.173201 504.640081 556.805139 469.760465 562.693074 407.937145 600.132662 407.937145 600.132662S333.633962 640.900214 334.145956 656.388043zM302.722302 590.980763c21.631762 0.831991 84.607069-40.319556 84.607069-40.319556s71.935209-43.071526 85.823056-67.711255C487.040275 458.374222 487.744267 372.679164 487.744267 372.679164S489.856244 286.088117 476.608389 278.024205C463.296536 269.960294 391.361327 314.631803 391.361327 314.631803S328.450019 350.34341 306.306263 377.671109C284.610501 404.678812 285.63449 492.293848 285.63449 495.237816 285.506491 498.117784 281.474536 590.212771 302.722302 590.980763zM787.964964 353.415376c13.951847 24.639729 85.951055 67.711255 85.951055 67.711255s62.975307 41.215547 84.607069 40.319556c21.183767-0.831991 17.151811-92.798979 17.087812-95.742947 0-2.879968 1.215987-90.431005-20.607773-117.566707-22.143756-27.391699-85.119064-63.039307-85.119064-63.039307s-71.935209-44.735508-85.183063-36.607597c-13.375853 7.999912-11.199877 94.590959-11.199877 94.590959S774.269115 328.903646 787.964964 353.415376zM717.821736 377.671109c-22.207756-27.391699-85.119064-63.103306-85.119064-63.103306S560.767464 269.960294 547.45561 278.024205C534.207756 286.088117 536.255733 372.679164 536.255733 372.679164s0.831991 85.631058 14.655839 110.270787c13.887847 24.639729 85.759057 67.711255 85.759057 67.711255s63.103306 41.151547 84.671069 40.319556c21.247766-0.831991 17.151811-92.926978 17.023813-95.806946C738.36551 492.293848 739.517497 404.678812 717.821736 377.671109zM546.303623 205.960998c13.759849 24.639729 85.759057 67.711255 85.759057 67.711255s63.039307 41.151547 84.671069 40.319556c21.183767-0.767992 17.151811-92.798979 17.087812-95.806946 0-2.815969 1.023989-90.495005-20.671773-117.438708-22.079757-27.519697-85.119064-63.039307-85.119064-63.039307S556.031516-7.092658 542.783661 0.971253C529.407809 8.971165 531.647784 95.626212 531.647784 95.626212S532.351776 181.25727 546.303623 205.960998zM231.299088 630.532328c13.823848-24.703728 14.591839-110.334786 14.591839-110.334786s2.175976-86.591047-11.071878-94.718958C221.379197 417.478671 149.443988 462.15018 149.443988 462.15018S86.596679 497.733789 64.452923 525.189487c-21.759761 27.071702-20.735772 114.622739-20.735772 117.502707C43.653152 645.636162 39.685195 737.667149 60.804963 738.56314c21.695761 0.703992 84.671069-40.383556 84.671069-40.383556S217.47524 654.980059 231.299088 630.532328zM860.924162 727.939256c-2.431973-1.343985-78.335138-45.247502-112.510762-39.423566-34.751618 5.695937-96.638937 43.263524-96.638937 43.263524s-74.303183 40.703552-73.855188 56.255381c0.639993 15.48783 77.119152 56.127383 77.119152 56.127383s75.263172 41.343545 103.294864 41.343545c28.351688 0 101.118888-41.727541 101.118888-41.727541s66.815265-34.815617 76.671157-54.015406C945.979226 770.882784 863.676132 729.283242 860.924162 727.939256zM65.476912 461.446188c21.631762 0.831991 84.671069-40.319556 84.671069-40.319556S222.083189 378.119104 235.971036 353.415376c13.823848-24.57573 14.655839-110.398786 14.655839-110.398786S252.738852 156.553542 239.554997 148.48963C226.115145 140.425719 154.179936 185.161227 154.179936 185.161227S91.204629 220.744836 69.124872 248.136534C47.365111 275.272236 48.453099 362.823273 48.453099 365.703241 48.3251 368.647209 44.293145 460.678196 65.476912 461.446188zM980.282849 642.692194c0.063999-2.879968 1.087988-90.431005-20.671773-117.502707-22.079757-27.455698-85.119064-63.039307-85.119064-63.039307s-71.80721-44.671509-85.183063-36.671597c-13.247854 8.127911-11.199877 94.718958-11.199877 94.718958s0.831991 85.631058 14.655839 110.334786c13.823848 24.51173 85.759057 67.711255 85.759057 67.711255s63.039307 41.087548 84.735068 40.383556C984.506802 737.667149 980.346848 645.636162 980.282849 642.692194zM445.312734 796.6745c9.663894-18.879792-72.639201-60.351336-75.327171-61.82332-2.431973-1.343985-78.335138-45.183503-112.510762-39.487566-34.687618 5.823936-96.638937 43.263524-96.638937 43.263524s-74.239183 40.831551-73.727189 56.38338 77.055152 56.063383 77.055152 56.063383 75.135174 41.343545 103.422862 41.343545 101.054888-41.599542 101.054888-41.599542S435.328843 815.938288 445.312734 796.6745zM613.886879 866.433733c-2.431973-1.343985-78.271139-45.183503-112.446763-39.423566-34.815617 5.823936-96.766936 43.199525-96.766936 43.199525s-74.175184 40.89555-73.66319 56.447379c0.511994 15.551829 77.055152 56.063383 77.055152 56.063383S483.136318 1024 511.360007 1024s101.054888-41.599542 101.054888-41.599542 66.815265-34.815617 76.671157-54.015406C698.813945 909.44126 616.51085 867.841717 613.886879 866.433733z",root:"M599.296 791.424c0-26.432 21.504-48 48-48s48 21.568 48 48-21.504 48-48 48S599.296 817.856 599.296 791.424zM391.296 743.424c-26.496 0-48 21.568-48 48s21.504 48 48 48 48-21.568 48-48S417.792 743.424 391.296 743.424zM245.12 580.8C236.416 568.832 222.912 560.448 206.912 560.448c-26.496 0-48 21.568-48 48s21.504 48 48 48 48-21.568 48-48c0-5.376-1.408-10.304-3.072-15.104L245.12 580.8zM564.288 214.272c0-26.432-21.504-48-48-48s-48 21.568-48 48 21.504 48 48 48S564.288 240.704 564.288 214.272zM816.512 560.448c-16 0-29.44 8.384-38.208 20.352l-6.72 12.48c-1.6 4.8-3.072 9.728-3.072 15.104 0 26.432 21.504 48 48 48s48-21.568 48-48S843.008 560.448 816.512 560.448zM960 512c0 247.36-200.576 448-448 448-247.36 0-448-200.64-448-448 0-247.424 200.64-448 448-448C759.424 64 960 264.576 960 512zM912.512 608.448c0-52.992-43.008-96-96-96-23.616 0-44.992 8.896-61.696 23.04-54.976-28.928-128.128-66.176-151.68-76.288C576.576 447.808 560.704 426.24 550.912 404.608 546.88 381.888 545.344 356.096 545.728 338.496L545.728 305.216c38.528-12.48 66.56-48.256 66.56-90.944 0-52.992-43.008-96-96-96s-96 43.008-96 96c0 42.944 28.352 78.848 67.328 91.136l0 33.152c-0.192 1.92 0.064 4.8 0 7.168C486.208 364.672 476.928 434.944 420.288 459.2c-23.552 10.112-96.64 47.36-151.616 76.288-16.768-14.208-38.144-23.04-61.76-23.04-52.992 0-96 43.008-96 96s43.008 96 96 96 96-43.008 96-96c0-11.84-2.432-22.976-6.336-33.408C348.608 547.776 414.72 514.048 437.568 504.064 426.88 522.688 416.448 541.312 410.24 553.216c-27.648 53.376-25.216 121.472-25.088 123.392l0 19.52c-50.112 3.264-89.856 44.48-89.856 95.36 0 52.992 43.008 96 96 96s96-43.008 96-96c0-37.952-22.208-70.4-54.144-86.016l0-29.888c-0.704-16 1.536-65.344 19.712-100.224C467.072 547.968 506.304 480.768 513.92 469.184c1.664-2.56 2.944-5.76 4.352-8.64 1.536 3.008 2.88 6.272 4.608 8.896C530.56 480.768 570.304 547.84 584.768 575.296c21.888 41.856 19.904 99.712 19.84 101.248l0 29.376c-31.424 15.744-53.248 47.936-53.248 85.504 0 52.992 43.008 96 96 96s96-43.008 96-96c0-51.2-40.256-92.672-90.752-95.488l0-18.368c0.128-2.88 2.688-70.976-25.344-124.544C622.208 543.36 613.824 528.576 604.8 512.96c30.464 14.656 80.512 40.32 121.984 62.08-3.904 10.432-6.336 21.632-6.336 33.408 0 52.992 43.008 96 96 96S912.512 661.44 912.512 608.448z",sequence:"M64 384l0 384 0 192 192 0 0-192L256 384 256 64 64 64 64 384zM192 448l0 256L128 704 128 448 192 448zM320 576l0 320 0 64 192 0 0-64L512 576 512 256 320 256 320 576zM448 640l0 192L384 832l0-192L448 640zM576 320l0 384 0 256 192 0 0-256L768 320 768 128 576 128 576 320zM704 384l0 256-64 0L640 384 704 384zM832 384l0 192 0 320 0 64 192 0 0-64L1024 576 1024 384 832 384zM960 640l0 192-64 0 0-192L960 640z",selector:"M950.658471 77.376c-61.184-63.104-261.248-76.352-418.432-76.352L525.314471 1.024C520.194471 0.896 498.370471 0.128 466.946471 0.128c-118.592 0-276.224 9.088-353.344 51.776C0.642471 114.432-2.941529 391.168 0.898471 509.248c-3.84 119.936-0.192 400.384 112.704 463.04 76.992 42.56 234.624 51.648 353.152 51.648 31.488 0 53.44-0.704 58.624-0.896l6.976 0c157.12 0 357.184-13.248 418.368-76.352 69.056-71.104 74.24-327.232 73.28-434.624C1024.962471 404.608 1019.778471 148.608 950.658471 77.376zM912.578471 910.336c-6.848 7.104-17.152 13.312-29.824 18.88L882.754471 576.832c0-19.584-15.744-35.392-35.264-35.392L776.962471 541.44c-19.52 0-35.392 15.808-35.392 35.392l0 382.912c-19.648 2.24-39.424 3.968-58.752 5.44L682.818471 788.48c0-19.584-15.808-35.264-35.328-35.264L576.962471 753.216c-19.584 0-35.392 15.68-35.392 35.264l0 182.144c-3.456 0-6.784 0-9.216 0-5.056 0-7.872 0-7.872 0s-16.384 0.512-41.728 0.64l0-270.976c0-19.52-15.808-35.264-35.328-35.264L376.834471 665.024c-19.52 0-35.328 15.744-35.328 35.264l0 267.2c-19.584-1.344-39.36-3.2-58.816-5.44L282.690471 523.776c0-19.392-15.744-35.2-35.2-35.2L176.834471 488.576c-19.52 0-35.328 15.808-35.328 35.2l0 403.52c-0.576-0.32-1.472-0.576-2.048-0.896-97.472-54.016-85.888-405.824-85.504-417.216C53.698471 503.296 50.498471 401.28 62.274471 299.392c23.296-8.192 124.032-37.248 263.04 19.584C412.802471 354.624 519.746471 429.504 557.890471 532.992l30.656 83.2 20.032-86.4c28.544-124.096 88.832-174.272 132.992-194.688l0 63.168c0 6.72 2.368 12.416 7.232 17.216 4.8 4.928 10.624 7.36 17.28 7.296 6.336-0.064 12.224-2.432 17.088-7.296l92.672-92.544c4.8-4.928 7.168-10.688 7.232-17.216-0.064-6.656-2.432-12.352-7.232-17.216l-92.736-92.672c-4.736-4.864-10.688-7.232-17.024-7.232-6.656 0-12.416 2.368-17.28 7.168-4.864 4.928-7.232 10.56-7.296 17.216l0.064 65.088c-49.344 16.448-121.472 59.968-165.056 174.656C520.450471 365.504 425.410471 302.528 345.346471 269.952 218.434471 218.176 119.874471 229.696 70.850471 241.664c12.416-66.432 33.344-124.48 68.608-144 71.232-39.552 238.72-44.992 327.488-44.992 34.816 0 57.536 0.832 57.536 0.832s2.816 0 7.808 0c50.176 0 324.48 2.688 380.288 60.288C974.146471 177.344 971.074471 512 971.074471 512S974.146471 846.72 912.578471 910.336z",decorator:"M810.688 463.616c-81.472 0-149.376 69.504-149.376 149.376 0 58.24 36.352 110.72 87.744 134.976-24.512 66.304-87.552 113.856-162.368 113.856-85.12 0-154.88-61.44-170.048-142.272 19.712-27.456 36.416-62.4 42.816-87.872 144.896-95.552 201.856-385.536 201.856-417.024 0-53.824-99.584-149.312-99.584-149.312L526.976 65.344C491.136 58.24 454.4 78.272 441.856 114.176 428.16 153.408 448.576 196.032 487.36 209.664 495.488 212.48 503.808 213.568 512 213.504l0 1.28 49.728 0C560.896 260.48 505.92 563.2 362.688 563.2c-143.04 0-199.104-348.416-199.104-348.416l32.32 0c29.632 6.528 61.248-5.76 78.528-33.344C296.32 145.92 286.016 99.392 251.328 77.12c-11.904-7.616-24.96-11.136-38.016-11.392L213.312 65.408 163.584 65.408c0 0-99.584 82.88-99.584 136.32 0 31.744 58.048 335.36 205.568 431.36 10.112 28.096 28.288 67.776 48.896 95.808 20.096 131.328 131.328 232.512 268.224 232.512 127.36 0 232.768-87.36 263.04-205.184C912.704 738.24 960 679.488 960 612.992 960 533.184 892.224 463.616 810.688 463.616zM810.688 662.72c-27.584 0-49.792-22.272-49.792-49.728 0-27.584 22.272-49.792 49.792-49.792 27.52 0 49.728 22.272 49.728 49.792C860.416 640.512 838.208 662.72 810.688 662.72z",service:"M862.336 700.672c-38.976 0-74.816 13.824-102.784 36.8l0.192-0.512c0 0-52.48 53.824-136.256 35.072l-251.2-67.264C320.64 686.08 298.24 649.024 290.048 630.528 284.352 611.968 275.264 595.008 263.296 580.288l0.192 0c0 0-45.888-52.992-28.096-129.088l38.976-145.728c14.72-44.48 47.68-62.144 64.384-70.656 23.616-8.768 43.776-24.704 57.728-45.184C406.656 177.344 433.984 150.784 482.56 148.224l226.624 0c36.992 3.008 58.624 26.816 65.344 35.52 0.448 0.64 0.896 1.28 1.28 1.856l0 0c0 0 28.032 37.76 16.192 81.536l0 0-24.512 91.648c-0.256 0.768-0.512 1.472-0.768 2.368-9.792 36.48-31.04 54.336-43.072 61.76-16.256 5.632-30.528 15.552-41.344 28.48-0.128 0.128-0.32 0.32-0.512 0.512-3.392 4.096-6.528 8.64-9.152 13.312-17.92 19.264-46.272 19.776-48.256 19.776L624.256 484.992 620.48 484.992C612.544 484.608 593.28 481.6 575.808 462.4c-0.64-0.896-1.344-1.728-2.048-2.624C563.072 444.736 563.072 430.144 564.288 421.888l2.432-8.896C568.832 407.744 575.552 393.6 589.76 386.368c25.408-9.6 43.584-34.176 43.584-62.976C633.344 286.144 603.2 256 565.952 256 528.768 256 498.56 286.144 498.56 323.392c0 12.672 3.52 24.512 9.6 34.688 8.64 25.088 5.632 44.16 5.632 44.16s0 0.064-0.064 0.256L511.936 409.344C509.056 416.384 501.824 427.2 483.584 436.352 452.928 447.872 431.168 477.376 431.168 512c0 44.672 36.16 80.832 80.832 80.832 26.048 0 49.28-12.288 64-31.36 23.296-21.888 45.952-22.528 45.952-22.528l8.064 0c10.56 0.832 29.696 5.12 45.312 24.256 16.896 25.984 46.016 43.136 79.232 43.136 52.096 0 94.272-42.24 94.272-94.336 0-22.528-7.872-43.264-21.056-59.52-6.72-14.272-17.728-43.264-10.496-70.528 0.448-1.344 0.704-2.688 0.96-4.096l24.896-92.992c13.12-39.232 47.936-58.24 59.008-63.424 39.872-15.808 68.096-54.656 68.096-100.16 0-59.52-48.384-107.84-107.904-107.84-33.344 0-63.296 15.296-83.136 39.168l0.064-0.448c0 0-29.312 42.112-84.928 42.112l-201.6 0c-55.68-0.064-84.672-27.328-95.296-40.256C375.616 21.504 338.496 0 296.448 0 229.504 0 175.168 54.272 175.168 121.28c0 28.672 9.92 54.976 26.56 75.776 20.608 29.44 28.032 67.2 18.304 102.72C219.904 300.608 219.712 301.376 219.52 302.144L183.36 437.056C160.64 517.44 94.4 535.232 94.4 535.232l0.576 0.192C39.424 556.736 0 610.56 0 673.664c0 81.792 66.368 148.224 148.224 148.224 38.208 0 73.024-14.528 99.264-38.272 17.024-11.712 64.768-38.656 127.36-21.888 4.096 1.152 8.064 1.92 11.84 2.688l222.976 59.776c65.536 20.288 93.888 77.312 100.288 92.288C732.288 979.2 792.064 1024 862.336 1024 951.68 1024 1024 951.552 1024 862.336 1024 772.992 951.68 700.672 862.336 700.672z",task:"M638.4 407.104C603.072 371.968 557.184 354.432 510.848 354.432S418.688 371.968 383.36 407.104c-35.328 35.2-52.864 81.088-52.864 127.104 0 46.016 17.536 91.776 52.864 126.976 35.328 35.2 81.28 52.608 127.616 52.608 46.272 0 92.032-17.408 127.36-52.608 35.392-35.264 52.864-81.024 52.928-126.976C691.264 488 673.728 442.304 638.4 407.104zM613.248 470.848 527.488 549.76C527.232 550.016 526.848 550.144 526.592 550.4 519.296 558.144 507.584 560.896 497.088 555.84L399.744 508.608c-12.672-6.208-18.176-21.12-12.224-33.344 6.016-12.16 21.12-17.216 33.728-11.008l82.688 40.192 75.84-69.76c10.304-9.536 26.24-9.28 35.456 0.64C624.448 445.376 623.552 461.248 613.248 470.848zM512 64C264.64 64 64 264.576 64 512c0 247.36 200.64 448 448 448 247.424 0 448-200.64 448-448C960 264.576 759.424 64 512 64zM335.68 258.304c27.456 0 51.712 13.824 66.048 34.944C373.824 306.88 348.096 324.992 325.504 347.584 309.824 363.2 296.256 380.288 284.736 398.656 267.264 384.064 256 362.176 256 337.664 256 293.824 291.776 258.304 335.68 258.304zM675.264 697.984c-45.248 44.992-104.832 67.712-164.16 67.712L510.976 765.696 510.72 765.696c-59.328 0-118.912-22.656-164.16-67.712C301.248 652.8 278.464 593.344 278.592 534.272 278.464 491.712 290.304 448.896 313.856 411.52c9.28-14.592 20.032-28.352 32.704-41.024 18.496-18.304 39.232-33.024 61.44-43.904 32.384-15.872 67.648-23.936 102.656-23.936l0.192 0 0.192 0c36.8 0 73.92 8.832 107.456 26.304 20.416 10.496 39.68 24.384 56.768 41.472L675.264 370.432c13.12 13.12 24.256 27.392 33.536 42.432 22.848 37.12 34.56 79.296 34.432 121.344C743.36 593.344 720.512 652.8 675.264 697.984zM739.328 398.592c-11.456-18.24-25.024-35.456-40.704-51.072-22.656-22.528-48.32-40.64-76.224-54.336 14.336-21.056 38.528-34.88 65.984-34.88C732.352 258.304 768 293.76 768 337.664 768 362.112 756.8 384.064 739.328 398.592z"},widgets:{closeButton:function(t){var e=_.a.Utils.lodash.merge({x:0,y:0,size:10,background:"transparent",stroke:"#333",strokeWidth:2,lineCap:"round",lineJoin:"round"},t),i=new W.a.Group({x:e.x,y:e.y,rotation:45,name:"btn-close"}),n=new W.a.Circle({x:0,y:0,radius:e.size/2,fill:e.background,stroke:e.background});i.add(n);var o=e.size/2-2,s=new W.a.Line({points:[-o,0,o,0],stroke:e.stroke,strokeWidth:e.strokeWidth,lineCap:"round",lineJoin:"round"});i.add(s);var a=new W.a.Line({points:[0,-o,0,o],stroke:e.stroke,strokeWidth:e.strokeWidth,lineCap:"round",lineJoin:"round"});return i.add(a),i.on("mousedown",function(t){t.cancelBubble=!0,e.action&&e.action()}),i.on("mouseout",function(){a.setAttr("stroke",e.stroke),s.setAttr("stroke",e.stroke),this.getLayer().draw()}),i.on("mouseover",function(){a.setAttr("stroke","#FF3030"),s.setAttr("stroke","#FF3030"),this.getLayer().draw()}),i},jumpButton:function(t){var e=_.a.Utils.lodash.merge({x:0,y:0,size:10,background:"transparent",stroke:"#333",strokeWidth:2,lineCap:"round",lineJoin:"round"},t),i=new W.a.Group({x:e.x,y:e.y,rotation:135,name:"btn-jump"}),n=new W.a.Circle({x:0,y:0,radius:e.size/2,fill:e.background,stroke:e.background});i.add(n);var o=e.size/2-2,s=new W.a.Line({points:[0,0,o,0],stroke:e.stroke,strokeWidth:e.strokeWidth,lineCap:"round",lineJoin:"round"});i.add(s);var a=new W.a.Line({points:[0,0,0,o],stroke:e.stroke,strokeWidth:e.strokeWidth,lineCap:"round",lineJoin:"round"});return i.add(a),i.on("mousedown",function(t){t.cancelBubble=!0,e.action&&e.action()}),i.on("mouseout",function(){a.setAttr("stroke",e.stroke),s.setAttr("stroke",e.stroke),this.getLayer().draw()}),i.on("mouseover",function(){a.setAttr("stroke","#FF3030"),s.setAttr("stroke","#FF3030"),this.getLayer().draw()}),i},expandButton:function(t){var e=_.a.Utils.lodash.merge({x:10,y:10,size:10,background:"transparent",stroke:"#333",strokeWidth:1,lineCap:"round",lineJoin:"round"},t),i=new W.a.Group({x:e.x,y:e.y,name:"btn-expand"}),n=new W.a.Circle({x:0,y:0,radius:e.size/2,fill:e.background,stroke:e.stroke,strokeWidth:e.strokeWidth});i.add(n);var o=e.size/2-2,s=new W.a.Line({points:[-o,0,o,0],stroke:e.stroke,strokeWidth:e.strokeWidth,lineCap:"round",lineJoin:"round",listening:!1});i.add(s);var a=new W.a.Line({points:[0,-o,0,o],stroke:e.stroke,strokeWidth:e.strokeWidth,lineCap:"round",lineJoin:"round",listening:!1});return i.add(a),i.on("mousedown",function(t){t.cancelBubble=!0,e.action&&e.action()}),i.on("mouseout",function(){a.setAttr("stroke",e.stroke),s.setAttr("stroke",e.stroke),this.getLayer().draw()}),i.on("mouseover",function(){a.setAttr("stroke","#FF3030"),s.setAttr("stroke","#FF3030"),this.getLayer().draw()}),{button:i,vline:a}}}},T=L,A=(i("1c74"),i("3b54"),i("df36"),i("7de5")),H=i("f6d0"),F=i("c71c"),N=i("8930"),I=i("4408"),R=(i("fb37"),function(){function t(e){Object(M["a"])(this,t),this.config=_.a.Utils.lodash.merge({x:0,y:0,fill:"#ffffff",stroke:"#000000",strokeWidth:1,type:"node",dragDistance:0,names:{node:!0},location:{startLine:-1,startCol:-1,endLine:-1,endCol:-1},canClose:!1,canJump:!0,canMove:!1,canExpand:!1,acceptChild:!1,acceptProperty:!0},e),this.config.uid=_.a.Utils.common.uniqid(),this.config.names[this.config.type]=!0,this.isSelected=!1,this.root=new W.a.Group({x:this.config.x,y:this.config.y,draggable:!1,dragDistance:this.config.dragDistance,name:Object.keys(this.config.names).join(" "),id:this.config.uid}),this.background=this.createBackground(),this.background&&this.root.add(this.background),this.root.setAttr("@node",this),this.createBody()}return Object(B["a"])(t,[{key:"createBackground",value:function(){return new W.a.Rect({x:0,y:0,width:this.config.width,height:this.config.height,draggable:!0,fill:this.config.fill,stroke:this.config.stroke,strokeWidth:this.config.strokeWidth})}},{key:"createBody",value:function(){this.components={},this.body=new W.a.Group({x:0,y:0,name:"model-body"}),this.root.add(this.body)}},{key:"parent",value:function(){var t=this.root.getParent();while(t){if(t.hasName("element"))break;t=t.getParent()}return t?t.getAttr("@element"):null}},{key:"hasParent",value:function(t){var e=this.parent();while(e&&e!==t)e=e.parent();return e===t}},{key:"level",value:function(){var t=0,e=this.parent();while(e)t+=1,e=e.parent();return t}},{key:"remove",value:function(){}},{key:"destroy",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.root.destroy()}},{key:"deleteSelf",value:function(t){this.remove(),this.destroy()}},{key:"adjust",value:function(t){}},{key:"selected",value:function(t){this.isSelected=t,this.background&&this.background.fill(this.isSelected?this.config.highlight:this.config.fill)}},{key:"refresh",value:function(){this.root.getLayer().draw()}},{key:"nodeType",value:function(){return this.config.type}},{key:"isType",value:function(t){return this.root.hasName(t)}},{key:"toJson",value:function(){return{type:this.config.type,config:this.config}}},{key:"knode",value:function(){return this.root}},{key:"stage",value:function(){var t=this.root.getStage();return t?t.getAttr("@stage"):null}},{key:"position",value:function(){return this.root.position()}},{key:"size",value:function(){return{width:this.config.width,height:this.config.height}}},{key:"id",value:function(){return this.root.id()}},{key:"visible",value:function(t){if(null==t)return this.root.visible();this.root.visible(t)}},{key:"canClose",value:function(){return this.config.canClose}},{key:"canJump",value:function(){return this.config.canJump}},{key:"canMove",value:function(){return this.config.canMove}},{key:"canExpand",value:function(){return this.config.canExpand}},{key:"canAcceptChild",value:function(){return this.config.acceptChild}},{key:"canAcceptProperty",value:function(){return this.config.acceptProperty}},{key:"clearContent",value:function(t){}},{key:"dump",value:function(){return this.toJson()}},{key:"code",value:function(){return""}},{key:"location",value:function(){return this.config.location}}]),t}()),J=R,D=function(t){var e=t.height/2;return"m 0,4 a 4,4 0 0,1 4,-4 H ".concat(t.width-e," a ").concat(e,",").concat(e," 0 0,1 0,").concat(t.height," H 4 a 4,4 0 0,1 -4,-4 z")},U=function(t){function e(t){var i;Object(M["a"])(this,e);var n=_.a.Utils.lodash.merge({x:0,y:0,type:"property",highlight:T.property.highlight,names:{},key:"",value:"",event:!1},t);return n.key=n.name,n.width=Math.max(t.width||0,T.property.minWidth),n.height=Math.max(t.height||0,T.property.minHeight),i=Object(A["a"])(this,Object(F["a"])(e).call(this,n)),i.root.setAttr("@property",Object(H["a"])(i)),i.config.canClose&&(i.components.closeBtn=T.widgets.closeButton({uid:i.config.uid,action:function(){i.deleteSelf()}}),i.root.add(i.components.closeBtn)),i.config.canJump&&(i.components.jumpBtn=T.widgets.jumpButton({uid:i.config.uid,action:function(){var t=i.stage();t.notifyJump(i.config.location)}}),i.root.add(i.components.jumpBtn)),i.adjust(),i}return Object(I["a"])(e,t),Object(B["a"])(e,[{key:"deleteSelf",value:function(t){var e=this.stage();e&&e.isReadOnly()||(this.remove(),this.destroy(),e.refresh(),e.snapshot())}},{key:"createBackground",value:function(){var t=this,e=new W.a.Path({x:0,y:0,data:D(this.config),fill:this.config.fill,stroke:this.config.stroke,strokeWidth:this.config.strokeWidth,scaleX:1,scaleY:1});return e.hitFunc(function(i){i.beginPath(),i.rect(0,0,t.config.width,t.config.height),i.closePath(),i.fillStrokeShape(e)}),e}},{key:"createBody",value:function(){Object(N["a"])(Object(F["a"])(e.prototype),"createBody",this).call(this);var t=(this.config.height-T.property.fontSize)/2;this.components.key=new W.a.Text({x:4,y:t,text:this.config.name,fontSize:T.property.fontSize,fontFamily:"Calibri",fill:"#fff",listening:!1});var i="#9400D3";this.isEvent()?i="#006400":this.isDirective()&&(i="#1A1A1A"),this.components.keybg=new W.a.Rect({x:0,y:0,width:this.components.key.width()+8,height:this.config.height,fill:i,stroke:this.config.stroke,strokeWidth:this.config.strokeWidth,cornerRadius:4}),this.body.add(this.components.keybg),this.body.add(this.components.key),this.components.value=new W.a.Text({x:this.components.key.width()+12,y:t,text:this.config.value,fontSize:T.property.fontSize,fontFamily:"Calibri",fill:"#000",listening:!1}),this.body.add(this.components.value)}},{key:"remove",value:function(){var t=this.parent();t&&t.removeProperty(this.config.key)}},{key:"debrief",value:function(){var t={name:this.config.name,key:this.config.key,node:this,parent:this.parent(),pos:-1};return t.parent&&(t.pos=t.parent.properties.indexOf(this)),t}},{key:"resizeWidth",value:function(t){if(t&&(this.config.width=t,this.background.data(D(this.config))),this.components.closeBtn){var e=this.config.width,i=this.components.closeBtn.getClientRect();this.components.closeBtn.position({x:e-i.width/2,y:this.config.height/2})}if(this.components.jumpBtn){var n=this.config.width,o=this.components.jumpBtn.getClientRect();this.components.jumpBtn.position({x:n-o.width/2,y:this.config.height/2})}}},{key:"adjust",value:function(t){var e=this.components.key.width()+12+this.components.value.width()+this.config.height,i=Math.max(T.property.minWidth,e);this.resizeWidth(i)}},{key:"isEvent",value:function(){return this.config.event}},{key:"isDirective",value:function(){return 0===this.config.name.indexOf("wx:")}},{key:"key",value:function(){return this.config.key}},{key:"value",value:function(t){return t?(this.config.value=t,this.components.value.text(t),void this.adjust({bubble:!0})):this.config.value}},{key:"code",value:function(){return"".concat(this.config.name,'="').concat(this.config.value,'"')}}]),e}(J),$=U,V=function(t){var e=t.headHeight/2,i="m 0,4 A 4,4 0 0,1 4,0 H ".concat(t.width-e," a ").concat(e,",").concat(e," 0 0,1 0,").concat(2*e," ");if(t.expanded){var n=5;i+="H 20 a 4,4 0 0,0 -4,4 v ".concat(t.height-t.headHeight-18," a 4,4 0 0,0 4,4 H ").concat(t.width-e," a ").concat(n,",").concat(n," 0 0,1 0,").concat(2*n," H 4 a 4,4 0 0,1 -4,-4 z")}else i+="H 4 a 4,4 0 0,1 -4,-4 z";return i},Z=function(t){function e(t){var i;Object(M["a"])(this,e);var n=_.a.Utils.lodash.merge({fill:"pink",stroke:"red",strokeWidth:1,highlight:T.element.highlight,dragDistance:T.dragDistance,type:"element",names:{},canExpand:!0,expanded:!1,acceptChild:!0,headHeight:20},t);if("root"===n.tagName?n.fill="#CDB5CD":"template"===n.tagName&&(n.fill="#33a3dc"),n.width=Math.max(t.width||0,T.element.minWidth),n.height=Math.max(t.height||0,T.element.minHeight),i=Object(A["a"])(this,Object(F["a"])(e).call(this,n)),i.root.setAttr("@element",Object(H["a"])(i)),i.propertyMap=new Map,i.properties=[],i.children=[],i.config.canClose&&(i.components.closeBtn=T.widgets.closeButton({size:10,uid:i.config.uid,action:function(){i.deleteSelf()}}),i.root.add(i.components.closeBtn)),i.config.canJump&&(i.components.jumpBtn=T.widgets.jumpButton({size:10,uid:i.config.uid,action:function(){var t=i.stage();t.notifyJump(i.config.location)}}),i.root.add(i.components.jumpBtn)),i.config.canExpand){var o=T.widgets.expandButton({size:10,uid:i.config.uid,action:function(){i.toggleExpand(),i.refresh()}});i.components.expandBtn=o.button,i.components.expandVline=o.vline,i.components.expandVline.visible(!i.config.expanded),i.root.add(i.components.expandBtn)}return i.adjust(),i}return Object(I["a"])(e,t),Object(B["a"])(e,[{key:"deleteSelf",value:function(t){var e=this.stage();e&&e.isReadOnly()||(this.remove(),this.clearContent(),this.destroy(),e.refresh(!0),e.snapshot())}},{key:"createBackground",value:function(){var t=this,e=new W.a.Path({x:0,y:0,data:V(this.config),fill:this.config.fill,stroke:this.config.stroke,strokeWidth:this.config.strokeWidth,scaleX:1,scaleY:1});return e.hitFunc(function(i){var n=t.size();i.beginPath(),i.rect(0,0,n.width,n.height),i.closePath(),i.fillStrokeShape(e)}),e}},{key:"createBody",value:function(){Object(N["a"])(Object(F["a"])(e.prototype),"createBody",this).call(this),this.components.name=new W.a.Text({x:20,y:2,text:this.config.tagName,fontSize:14,fontFamily:"Calibri",fontStyle:"bold",fill:"#000",listening:!1}),this.body.add(this.components.name),this.propOffset=40+this.components.name.width()}},{key:"expand",value:function(t){this.config.expanded=t,this.components.expandVline.visible(!this.config.expanded),this.background.data(V(this.config));var e=!0,i=!1,n=void 0;try{for(var o,s=this.children[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var a=o.value;a.knode().visible(this.config.expanded)}}catch(r){i=!0,n=r}finally{try{e||null==s.return||s.return()}finally{if(i)throw n}}this.adjust({bubble:!0})}},{key:"toggleExpand",value:function(){this.expand(!this.config.expanded)}},{key:"expandChildren",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!0,n=!1,o=void 0;try{for(var s,a=this.children[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var r=s.value;"element"===r.nodeType()&&(e&&r.expandChildren(t,e),r.expand(t))}}catch(c){n=!0,o=c}finally{try{i||null==a.return||a.return()}finally{if(n)throw o}}}},{key:"addProperty",value:function(t){var e=new $(Object.assign({x:this.propOffset,y:2},t));return this.body.add(e.knode()),this.properties.push(e),this.propertyMap.set(e.key(),e),e}},{key:"addChild",value:function(t){t&&(t.knode().x(16),t.knode().visible(this.config.expanded),this.children.push(t),this.body.add(t.knode()),this.adjust())}},{key:"remove",value:function(){var t=this.parent();t&&t.removeChild(this)}},{key:"removeChild",value:function(t){if(t){var e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.knode().remove()),this.adjust()}}},{key:"insertChild",value:function(t,e){t.knode().x(16),t.knode().visible(this.config.expanded),this.body.add(t.knode()),e<0?this.children.push(t):this.children.splice(e,0,t),this.adjust()}},{key:"placeholderChild",value:function(t){var e=this.config.width,i=this.config.height,n=this.root.getAbsolutePosition(),o=this.stage().zoom,s={top:n.y,bottom:n.y+i*o,left:n.x,right:n.x+e*o};if(t.y<s.top||t.y>s.bottom)return-1;var a=-1;if(0===this.children.length)a=0;else for(var r=s.top+this.config.headHeight*o,c=0;c<this.children.length;c++){var h=this.children[c];if(r+=h.size().height*o,t.y<r){a=c;break}}return a}},{key:"swapChild",value:function(t,e){if(t<0&&(t=this.children.length-1),e<0&&(e=this.children.length-1),t!==e){var i=this.children[t];this.children[t]=this.children[e],this.children[e]=i,this.adjust()}}},{key:"clearProperty",value:function(){var t=!0,e=!1,i=void 0;try{for(var n,o=this.properties[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var s=n.value;s.destroy()}}catch(a){e=!0,i=a}finally{try{t||null==o.return||o.return()}finally{if(e)throw i}}this.properties=[],this.propertyMap.clear()}},{key:"removeProperty",value:function(t){if(this.propertyMap.has(t)){var e=this.propertyMap.get(t);e.knode().remove(),this.propertyMap.delete(t);var i=this.properties.indexOf(e);this.properties.splice(i,1),this.adjust({bubble:!0})}}},{key:"insertProperty",value:function(t,e){if(this.propertyMap.has(t.config.key)){var i=this.propertyMap.get(t.config.key),n=this.properties.indexOf(i);return this.swapProperty(e,n),i.value(t.config.value),t.destroy(),void this.adjust({bubble:!0})}this.propertyMap.set(t.config.key,t),this.body.add(t.knode()),e<0?this.properties.push(t):this.properties.splice(e,0,t),this.adjust({bubble:!0})}},{key:"placeholderProperty",value:function(t){var e=this.config.width,i=this.root.getAbsolutePosition(),n=this.stage().zoom,o={top:i.y,bottom:i.y+this.config.headHeight*n,left:i.x,right:i.x+e*n};if(t.x<o.left||t.x>o.right||t.y<o.top||t.y>o.bottom)return-1;var s=-1;if(0===this.properties.length)s=0;else{var a=(t.x-o.left)/n;a<=this.propOffset&&(s=0)}return s}},{key:"swapProperty",value:function(t,e){if(t<0&&(t=this.properties.length-1),e<0&&(e=this.properties.length-1),t!==e){var i=this.properties[t];this.properties[t]=this.properties[e],this.properties[e]=i,this.adjust({bubble:!0})}}},{key:"debrief",value:function(){var t={node:this,parent:this.parent(),pos:-1};return t.parent&&(t.pos=t.parent.children.indexOf(this)),t}},{key:"resizeWidth",value:function(t){this.config.width=t,this.background.data(V(this.config));var e=this.propOffset,i=2,n=!0,o=!1,s=void 0;try{for(var a,r=this.properties[Symbol.iterator]();!(n=(a=r.next()).done);n=!0){var c=a.value;e+c.config.width+8>=this.config.width&&(e=this.propOffset,i+=20),c.knode().x(e),c.knode().y(i),e+=c.config.width+8}}catch(f){o=!0,s=f}finally{try{n||null==r.return||r.return()}finally{if(o)throw s}}if(this.components.closeBtn){var h=this.config.width,l=this.components.closeBtn.getClientRect();this.components.closeBtn.position({x:h-l.width/2,y:this.config.headHeight/2})}if(this.components.jumpBtn){var d=this.config.width,u=this.components.jumpBtn.getClientRect();this.components.jumpBtn.position({x:d-u.width/2,y:this.config.headHeight/2})}}},{key:"resizeHeight",value:function(t){this.config.height=t,this.background.data(V(this.config));var e=this.config.headHeight,i=!0,n=!1,o=void 0;try{for(var s,a=this.children[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var r=s.value;r.knode().y(e),e+=r.size().height}}catch(c){n=!0,o=c}finally{try{i||null==a.return||a.return()}finally{if(n)throw o}}}},{key:"adjust",value:function(t){var e=Object.assign({bubble:!1,capture:!1},t),i=20,n=this.propOffset+20,o=T.element.minWidth,s=!0,a=!1,r=void 0;try{for(var c,h=this.properties[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var l=c.value;n+=l.config.width+8,n>=T.element.maxWidth&&(n-=l.config.width+8,o=Math.max(o,n),n=this.propOffset+20,n+=l.config.width+8,i+=20)}}catch(x){a=!0,r=x}finally{try{s||null==h.return||h.return()}finally{if(a)throw r}}n=Math.max(o,n),this.config.headHeight=i;var d=0;if(this.config.expanded){var u=!0,f=!1,p=void 0;try{for(var g,m=this.children[Symbol.iterator]();!(u=(g=m.next()).done);u=!0){var y=g.value;e.capture&&y.adjust({capture:!0}),d+=y.size().height}}catch(x){f=!0,p=x}finally{try{u||null==m.return||m.return()}finally{if(f)throw p}}d=Math.max(20,d)}var v=Math.max(T.element.minWidth,n);this.resizeWidth(v);var k=Math.max(T.element.minHeight,d+10+this.config.headHeight);if(this.resizeHeight(k),e.bubble){var b=this.parent();b&&b.adjust({bubble:!0})}}},{key:"tagName",value:function(){return this.config.tagName}},{key:"tagCategory",value:function(){return this.config.tagCategory}},{key:"isExpanded",value:function(){return this.config.expanded}},{key:"toJson",value:function(){var t={type:this.config.type,config:this.config,properties:[],children:[]},e=!0,i=!1,n=void 0;try{for(var o,s=this.properties[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var a=o.value;t.properties.push(a.toJson())}}catch(f){i=!0,n=f}finally{try{e||null==s.return||s.return()}finally{if(i)throw n}}var r=!0,c=!1,h=void 0;try{for(var l,d=this.children[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var u=l.value;t.children.push(u.toJson())}}catch(f){c=!0,h=f}finally{try{r||null==d.return||d.return()}finally{if(c)throw h}}return t}},{key:"size",value:function(){return{width:this.config.width,height:this.config.expanded?this.config.height:this.config.headHeight}}},{key:"clearContent",value:function(t){this.clearProperty();var e=!0,i=!1,n=void 0;try{for(var o,s=this.children[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var a=o.value;a.clearContent(),a.destroy()}}catch(r){i=!0,n=r}finally{try{e||null==s.return||s.return()}finally{if(i)throw n}}this.children=[],t&&this.adjust(t)}},{key:"code",value:function(){var t="<".concat(this.config.tagName),e=!0,i=!1,n=void 0;try{for(var o,s=this.properties[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var a=o.value;t+=" ".concat(a.code())}}catch(f){i=!0,n=f}finally{try{e||null==s.return||s.return()}finally{if(i)throw n}}t+=">";var r=!0,c=!1,h=void 0;try{for(var l,d=this.children[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var u=l.value;t+=u.code()}}catch(f){c=!0,h=f}finally{try{r||null==d.return||d.return()}finally{if(c)throw h}}return t+="</".concat(this.config.tagName,">"),t}},{key:"search",value:function(t){if(!t.key||0===t.key.length)return[];var e=[];if("root"===this.config.tagName);else if(t.hasElem&&this.config.tagName.toLowerCase().indexOf(t.key)>=0&&e.push(this),t.hasProp){var i=!0,n=!1,o=void 0;try{for(var s,a=this.properties[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var r=s.value;(r.key().toLowerCase().indexOf(t.key)>=0||r.value().toLowerCase().indexOf(t.key)>=0)&&e.push(r)}}catch(p){n=!0,o=p}finally{try{i||null==a.return||a.return()}finally{if(n)throw o}}}var c=!0,h=!1,l=void 0;try{for(var d,u=this.children[Symbol.iterator]();!(c=(d=u.next()).done);c=!0){var f=d.value;"text"===f.nodeType()?t.hasText&&f.code().toLowerCase().indexOf(t.key)>=0&&e.push(f):"comment"===f.nodeType()?t.hasComment&&f.code(!1).toLowerCase().indexOf(t.key)>=0&&e.push(f):Array.prototype.push.apply(e,f.search(t))}}catch(p){h=!0,l=p}finally{try{c||null==u.return||u.return()}finally{if(h)throw l}}return e}}]),e}(J),G=Z,q=function(t){return"m 0,4 A 4,4 0 0,1 4,0 H ".concat(t.width-4," a 4,4 0 0,1 4,4 V ").concat(t.height-4," a 4,4 0 0,1 -4,4 H 4 a 4,4 0 0,1 -4,-4 z")},X=function(t){function e(t){var i;Object(M["a"])(this,e);var n=_.a.Utils.lodash.merge({fill:"#fff",stroke:"#f00",strokeWidth:1,highlight:T.text.highlight,dragDistance:T.dragDistance,type:"text",names:{},tagName:"text",tagCategory:"wxml"},t);return n.acceptChild=!1,n.width=Math.max(t.width||0,T.text.minWidth),n.height=Math.max(t.height||0,T.text.minHeight),i=Object(A["a"])(this,Object(F["a"])(e).call(this,n)),i.root.setAttr("@text",Object(H["a"])(i)),i.config.canClose&&(i.components.closeBtn=T.widgets.closeButton({size:10,uid:i.config.uid,action:function(){i.deleteSelf()}}),i.root.add(i.components.closeBtn)),i.config.canJump&&(i.components.jumpBtn=T.widgets.jumpButton({size:10,uid:i.config.uid,action:function(){var t=i.stage();t.notifyJump(i.config.location)}}),i.root.add(i.components.jumpBtn)),i.adjust(),i}return Object(I["a"])(e,t),Object(B["a"])(e,[{key:"deleteSelf",value:function(t){var e=this.stage();e&&e.isReadOnly()||(this.remove(),this.destroy(),e.refresh(),e.snapshot())}},{key:"createBackground",value:function(){var t=this,e=new W.a.Path({x:0,y:0,data:q(this.config),fill:this.config.fill,stroke:this.config.stroke,strokeWidth:this.config.strokeWidth,scaleX:1,scaleY:1});return e.hitFunc(function(i){i.beginPath(),i.rect(0,0,t.config.width,t.config.height),i.closePath(),i.fillStrokeShape(e)}),e}},{key:"createBody",value:function(){Object(N["a"])(Object(F["a"])(e.prototype),"createBody",this).call(this),this.components.text=new W.a.Text({x:8,y:4,text:this.config.text,fontSize:T.text.fontSize,fontFamily:T.text.fontFamily,fill:"#000",listening:!1}),this.body.add(this.components.text)}},{key:"remove",value:function(){var t=this.parent();t&&t.removeChild(this)}},{key:"removeChild",value:function(t){if(t){var e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.knode().remove(),this.adjust({bubble:!0}))}}},{key:"debrief",value:function(){var t={node:this,parent:this.parent(),pos:-1};return t.parent&&(t.pos=t.parent.children.indexOf(this)),t}},{key:"resizeWidth",value:function(t){if(this.config.width=t,this.background.data(q(this.config)),this.components.closeBtn){var e=this.components.closeBtn.getClientRect();this.components.closeBtn.position({x:this.config.width-e.width/2,y:this.config.height/2})}if(this.components.jumpBtn){var i=this.components.jumpBtn.getClientRect();this.components.jumpBtn.position({x:this.config.width-i.width/2,y:this.config.height/2})}}},{key:"resizeHeight",value:function(t){this.config.height=t,this.background.data(q(this.config)),this.components.closeBtn&&this.components.closeBtn.y(this.config.height/2),this.components.jumpBtn&&this.components.jumpBtn.y(this.config.height/2)}},{key:"adjust",value:function(t){var e=Object.assign({bubble:!1,capture:!1},t),i=this.components.text.width()+32,n=Math.max(T.text.minWidth,i);this.resizeWidth(n);var o=this.components.text.height(),s=Math.max(T.text.minHeight,o+8);if(this.resizeHeight(s),e.bubble){var a=this.parent();a&&a.adjust({bubble:!0})}}},{key:"tagName",value:function(){return this.config.tagName}},{key:"code",value:function(){return this.config.text}},{key:"changeText",value:function(t){this.config.text=t,this.components.text.text(t),this.adjust({bubble:!0})}},{key:"clearContent",value:function(t){this.changeText("")}}]),e}(J),Y=X,K=function(t){return"m 0,4 A 4,4 0 0,1 4,0 H ".concat(t.width-4," a 4,4 0 0,1 4,4 V ").concat(t.height-4," a 4,4 0 0,1 -4,4 H 4 a 4,4 0 0,1 -4,-4 z")},Q=function(t){function e(t){var i;Object(M["a"])(this,e);var n=_.a.Utils.lodash.merge({fill:"#C1FFC1",stroke:"#f00",strokeWidth:1,highlight:T.comment.highlight,dragDistance:T.dragDistance,type:"comment",names:{},tagName:"comment",tagCategory:"wxml"},t);return n.acceptChild=!1,n.width=Math.max(t.width||0,T.comment.minWidth),n.height=Math.max(t.height||0,T.comment.minHeight),i=Object(A["a"])(this,Object(F["a"])(e).call(this,n)),i.root.setAttr("@text",Object(H["a"])(i)),i.config.canClose&&(i.components.closeBtn=T.widgets.closeButton({size:10,uid:i.config.uid,action:function(){i.deleteSelf()}}),i.root.add(i.components.closeBtn)),i.config.canJump&&(i.components.jumpBtn=T.widgets.jumpButton({size:10,uid:i.config.uid,action:function(){var t=i.stage();t.notifyJump(i.config.location)}}),i.root.add(i.components.jumpBtn)),i.adjust(),i}return Object(I["a"])(e,t),Object(B["a"])(e,[{key:"deleteSelf",value:function(t){var e=this.stage();e&&e.isReadOnly()||(this.remove(),this.destroy(),e.refresh(),e.snapshot())}},{key:"createBackground",value:function(){var t=this,e=new W.a.Path({x:0,y:0,data:K(this.config),fill:this.config.fill,stroke:this.config.stroke,strokeWidth:this.config.strokeWidth,scaleX:1,scaleY:1});return e.hitFunc(function(i){i.beginPath(),i.rect(0,0,t.config.width,t.config.height),i.closePath(),i.fillStrokeShape(e)}),e}},{key:"createBody",value:function(){Object(N["a"])(Object(F["a"])(e.prototype),"createBody",this).call(this),this.components.text=new W.a.Text({x:8,y:4,text:this.config.text,fontSize:T.comment.fontSize,fontFamily:T.comment.fontFamily,fill:"#333",listening:!1}),this.body.add(this.components.text)}},{key:"remove",value:function(){var t=this.parent();t&&t.removeChild(this)}},{key:"removeChild",value:function(t){if(t){var e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.knode().remove(),this.adjust({bubble:!0}))}}},{key:"debrief",value:function(){var t={node:this,parent:this.parent(),pos:-1};return t.parent&&(t.pos=t.parent.children.indexOf(this)),t}},{key:"resizeWidth",value:function(t){if(this.config.width=t,this.background.data(K(this.config)),this.components.closeBtn){var e=this.components.closeBtn.getClientRect();this.components.closeBtn.position({x:this.config.width-e.width/2,y:this.config.height/2})}if(this.components.jumpBtn){var i=this.components.jumpBtn.getClientRect();this.components.jumpBtn.position({x:this.config.width-i.width/2,y:this.config.height/2})}}},{key:"resizeHeight",value:function(t){this.config.height=t,this.background.data(K(this.config)),this.components.closeBtn&&this.components.closeBtn.y(this.config.height/2),this.components.jumpBtn&&this.components.jumpBtn.y(this.config.height/2)}},{key:"adjust",value:function(t){var e=Object.assign({bubble:!1,capture:!1},t),i=this.components.text.width()+32,n=Math.max(T.comment.minWidth,i);this.resizeWidth(n);var o=this.components.text.height(),s=Math.max(T.comment.minHeight,o+8);if(this.resizeHeight(s),e.bubble){var a=this.parent();a&&a.adjust({bubble:!0})}}},{key:"tagName",value:function(){return this.config.tagName}},{key:"code",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t?"\x3c!-- ".concat(this.config.text," --\x3e"):this.config.text}},{key:"changeText",value:function(t){this.config.text=t,this.components.text.text(t),this.adjust({bubble:!0})}},{key:"clearContent",value:function(t){this.changeText("")}}]),e}(J),tt=Q,et=function(t){var e=t.height/2;return"m 0,4 A 4,4 0 0,1 4,0 H ".concat(t.width-e," a ").concat(e,",").concat(e," 0 0,1 0,").concat(2*e," H 4 a 4,4 0 0,1 -4,-4 z")},it=function(t){function e(t){var i;Object(M["a"])(this,e);var n=_.a.Utils.lodash.merge({fill:"#ccc",stroke:"black",strokeWidth:1,type:"holder",names:{},canClose:!1,canMove:!1,acceptChild:!1,acceptProperty:!1,key:"**holder**"},t);return n.width=T.holder.minWidth,n.height=T.holder.minHeight,i=Object(A["a"])(this,Object(F["a"])(e).call(this,n)),i.root.setAttr("@holder",Object(H["a"])(i)),i.setPrototype(t.proto),i}return Object(I["a"])(e,t),Object(B["a"])(e,[{key:"createBackground",value:function(){var t=this,e=new W.a.Path({x:0,y:0,data:et(this.config),fill:this.config.fill,stroke:this.config.stroke,strokeWidth:this.config.strokeWidth,scaleX:1,scaleY:1});return e.hitFunc(function(i){var n=t.size();i.beginPath(),i.rect(0,0,n.width,n.height),i.closePath(),i.fillStrokeShape(e)}),e}},{key:"createBody",value:function(){}},{key:"setPrototype",value:function(t){if(this.config.proto=t,this.config.proto){var e=this.config.proto.size();this.config.width=e.width,this.config.height=e.height,this.root.position(this.config.proto.position())}this.adjust()}},{key:"adjust",value:function(t){this.background.data(et(this.config))}}]),e}(J),nt=it,ot=i("11b2"),st=i.n(ot),at=function(){function t(e){var i=this;Object(M["a"])(this,t),this.options={draggable:!0,canZoom:!0,canWheelZoom:!0,readonly:!1,debug:!1,hoverExpand:!1,events:{}},_.a.Utils.lodash.merge(this.options,e),this.stage=new W.a.Stage(this.options),this.stage.setAttr("@stage",this),this.root=null,this.layers={},this.layers.model=new W.a.Layer,this.stage.add(this.layers.model),this.layers.drag=new W.a.Layer,this.stage.add(this.layers.drag),this.dragStatus=0,this.dragMarker=new W.a.Group({name:"dragmarker",draggable:!0,visible:!1,x:0,y:0}),this.layers.drag.add(this.dragMarker),this.holder=new nt({proto:null}),this.holder.knode().visible(!1),this.layers.drag.add(this.holder.knode()),this.modified=!1,this.mouseClickPos={x:0,y:0},this.mousePos={x:0,y:0},this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomFactor=1.25,this.maxAction=50,this.actions=[],this.actionIndex=-1,this.select=null,this.selectPos=null,this.orderCache={},this.board=null,this.cache=null;var n=this.stage.container();n.oncontextmenu=function(t){t.preventDefault()},n.tabIndex=1,n.focus(),n.addEventListener("keydown",function(t){if(!0!==t.ctrlKey){if(!0!==t.altKey||i.isReadOnly()){var e=8;if(37===t.keyCode)i.stage.x(i.stage.x()-e);else if(38===t.keyCode)i.stage.y(i.stage.y()-e);else if(39===t.keyCode)i.stage.x(i.stage.x()+e);else if(40===t.keyCode)i.stage.y(i.stage.y()+e);else if(0===i.dragStatus)if(8===t.keyCode)i.select&&i.select.canClose()&&!i.isReadOnly()&&i.select.deleteSelf();else{if(" "!==t.key)return;i.select&&"element"===i.select.nodeType()&&(i.select.toggleExpand(),i.select.refresh())}}else if(8===t.keyCode&&i.select&&i.select.canClose()){var n=i.select.debrief();i.select=null,i.dragStatus=0,i.dragMarker.setAttr("@drag",null);var o=[].concat(n.node.children),s=!0,a=!1,r=void 0;try{for(var c,h=o[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var l=c.value;n.node.removeChild(l),n.parent.insertChild(l,n.pos++)}}catch(f){a=!0,r=f}finally{try{s||null==h.return||h.return()}finally{if(a)throw r}}n.node.deleteSelf(),i.root.adjust({capture:!0})}t.preventDefault(),i.layers.model.batchDraw()}else if("f"===t.key.toLowerCase())i.options.events.search&&i.options.events.search(i.select===i.root?null:i.select);else if(!i.isReadOnly()&&i.select&&0===i.dragStatus){var d=i.select;if("c"===t.key.toLowerCase())i.board={repeat:!0,cache:_.a.Utils.common.clone(d.toJson())};else if("v"===t.key.toLowerCase()){if(i.board&&"element"===d.nodeType()){var u=i.board.cache;"property"===u.type&&d.canAcceptProperty()?(d.addProperty({key:u.config.key,value:u.config.value}),d.adjust(),i.board.repeat||(i.board=null),i.snapshot()):"property"!==u.type&&d.canAcceptChild()&&("text"===u.type?i.addText(u.config,d):"comment"===u.type?i.addComment(u.config,d):i.loadElement(u,d),d.adjust({bubble:!0}),i.board.repeat||(i.board=null),i.snapshot()),i.refresh()}}else"x"===t.key.toLowerCase()&&(i.board={repeat:!1,cache:_.a.Utils.common.clone(d.toJson())},i.select.deleteSelf())}}),this.stage.on("mousedown",function(t){var e=t.target,n=i.findNodeParent(e);i.select!==n&&(i.select&&i.select.selected(!1),i.select=n,i.select&&(i.selectPos=i.stage.getPointerPosition(),i.select.selected(!0))),i.select&&i.select.canMove()&&0===t.evt.button?(i.dragMarker.setAttr("@drag",i.select.debrief()),i.dragMarker.position({x:0,y:0}),i.dragStatus=1):i.dragStatus=0,i.options.events.select&&i.options.events.select(i.select),i.refresh()}),this.stage.on("mouseup",function(t){1===i.dragStatus&&(i.dragMarker.setAttr("@drag",null),i.dragStatus=0)}),this.stage.on("mousemove",function(t){i.mousePos=i.stage.getPointerPosition();var e=i.dragMarker.getAttr("@drag");e&&1===i.dragStatus&&!i.isReadOnly()&&i.dragMarker.startDrag()}),this.stage.on("dblclick",function(t){if(i.select&&i.select!==i.root&&(!i.isReadOnly()||i.isDebug())){var e=i.select,n="";"property"===e.nodeType()&&(n=e.key(),e=e.parent()),i.options.events.edit&&i.options.events.edit(e,n)}}),this.stage.on("dragstart",function(t){if(!(t.target instanceof W.a.Stage)){i.dragStatus=2;var e=i.dragMarker.getAttr("@drag"),n=e.node.nodeType(),o=e.node.knode().absolutePosition(),s=i.stage.getTransform();o.x-=s.m[4],o.y-=s.m[5],o.x/=s.m[0],o.y/=s.m[0],i.holder.setPrototype(e.node),i.holder.knode().visible(!0),e.node.remove(),e.node.knode().visible(!0),e.node.knode().moveTo(i.layers.drag),e.node.knode().position(o),e.parent&&("property"===n?e.parent.insertProperty(i.holder,e.pos):e.parent.insertChild(i.holder,e.pos)),i.dragMarker.add(e.node.knode()),i.dragMarker.visible(!0),i.refresh()}}),this.stage.on("dragmove",function(t){if(i.mousePos=i.stage.getPointerPosition(),!(t.target instanceof W.a.Stage||i.isReadOnly())){i.dragStatus=3;var e=i.dragMarker.getAttr("@drag"),n=e.node.nodeType(),o=e.node.knode().absolutePosition(),s=i.layers.model.getIntersection(o),a=i.findNodeParent(s);if(a&&a!==e.node){var r=a.nodeType(),c={parent:null,pos:-1};if("property"===r||"holder"===r?(c.parent=a.parent(),r=c.parent.nodeType()):c.parent=a,"property"===n)c.parent.canAcceptProperty()&&(c.pos=c.parent.placeholderProperty(o),e.parent===c.parent?e.pos!==c.pos&&(e.parent.swapProperty(e.pos,c.pos),e.pos=c.pos):(e.parent.removeProperty("**holder**"),c.parent.insertProperty(i.holder,c.pos),e.parent=c.parent,e.pos=c.pos,i.root.adjust({capture:!0})));else if(c.parent.canAcceptChild()){if("template"===e.node.tagName()&&"template"===c.parent.tagName())return;i.options.hoverExpand?c.parent.expand(!0):c.parent.isExpanded()||(c.parent=c.parent.parent()),c.pos=c.parent.placeholderChild(o),e.parent===c.parent?e.pos!==c.pos&&(e.parent.swapChild(e.pos,c.pos),e.pos=c.pos):(e.parent.removeChild(i.holder),c.parent.insertChild(i.holder,c.pos),e.parent=c.parent,e.pos=c.pos,i.root.adjust({capture:!0}))}i.refresh()}}}),this.stage.on("dragend",function(t){if(!(t.target instanceof W.a.Stage)&&i.dragStatus>=2){i.dragMarker.stopDrag();var e=i.dragMarker.getAttr("@drag"),n=e.node.nodeType();e.node.knode().moveTo(i.layers.model),"property"===n?(e.parent.removeProperty("**holder**"),e.parent.insertProperty(e.node,e.pos)):(e.parent.removeChild(i.holder),e.parent.insertChild(e.node,e.pos)),i.dragMarker.setAttr("@drag",null),i.holder.setPrototype(null),i.dragStatus=0,i.refresh(),i.snapshot()}}),this.addRootElement(),this.refresh(),this.snapshot()}return Object(B["a"])(t,[{key:"findNodeParent",value:function(t){if(t instanceof W.a.Stage)return null;var e=t;while(e){if(e instanceof W.a.Group&&e.hasName("node"))break;e=e.getParent()}return e?e.getAttr("@node"):null}},{key:"snapshot",value:function(){if(this.root){this.actions.length>=this.maxAction&&this.actions.splice(0,1),this.actionIndex>=0&&this.actionIndex<this.actions.length-1&&this.actions.splice(this.actionIndex+1,this.actions.length-this.actionIndex-1);var t=this.saveToJson();this.actions.push(t),this.actionIndex=this.actions.length-1}}},{key:"refresh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&this.root&&this.root.adjust({capture:!0}),this.layers.model.batchDraw(),this.layers.drag.batchDraw()}},{key:"updateOrder",value:function(){this.root.updateOrder(-1)}},{key:"resize",value:function(t,e){t&&this.stage.width(t),e&&this.stage.height(e),this.stage.draw()}},{key:"zoomIn",value:function(){this.options.canZoom&&(this.zoom=_.a.Utils.lodash.clamp(this.zoom*this.zoomFactor,this.minZoom,this.maxZoom),this.stage.scale({x:this.zoom,y:this.zoom}),this.refresh())}},{key:"zoomOut",value:function(){this.options.canZoom&&(this.zoom=_.a.Utils.lodash.clamp(this.zoom/this.zoomFactor,this.minZoom,this.maxZoom),this.stage.scale({x:this.zoom,y:this.zoom}),this.refresh())}},{key:"reset",value:function(){this.zoom=1,this.stage.scale({x:this.zoom,y:this.zoom}),this.stage.position({x:0,y:0}),this.refresh()}},{key:"selectedNode",value:function(){return this.select}},{key:"selectedElement",value:function(){return this.select&&"element"===this.select.nodeType()?this.select:null}},{key:"selectNode",value:function(t){this.select!==t&&(this.select&&this.select.selected(!1),this.select=t,this.select&&this.select.selected(!0))}},{key:"showNode",value:function(t){if(t){var e=t.parent();while(e)e.expand(!0),e=e.parent();var i=t.knode().getAbsolutePosition(),n=this.stage.absolutePosition(),o=this.options.width,s=this.options.height,a={top:0,bottom:s,left:0,right:o};(i.x<=a.left||i.x>=a.right||i.y<=a.top||i.y>=a.bottom)&&(this.stage.position({x:0,y:n.y-(i.y-s/2)}),this.refresh())}}},{key:"clear",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.modified=!1,t&&(this.actions=[],this.actionIndex=-1),this.select=null,this.dragStatus=0,this.board=null,this.root&&this.root.clearContent({bubble:!1}),this.refresh()}},{key:"addRootElement",value:function(){this.root?_.a.Logger.debug("Root model is already existed!"):(this.root=new G({x:8,y:8,tagName:"root",acceptProperty:!1,expanded:!0,canJump:!1}),this.layers.model.add(this.root.root),this.root.adjust())}},{key:"addElement",value:function(t,e){if(e){var i=new G(t);if(t.attributes){var n=!0,o=!1,s=void 0;try{for(var a,r=t.attributes[Symbol.iterator]();!(n=(a=r.next()).done);n=!0){var c=a.value;i.addProperty(c)}}catch(h){o=!0,s=h}finally{try{n||null==r.return||r.return()}finally{if(o)throw s}}}return e.addChild(i),i.adjust({bubble:!0}),i}_.a.Logger.debug("parent model is null!")}},{key:"addText",value:function(t,e){if(e){var i=new Y({x:16,y:20,text:t.text});return e.addChild(i),e.expand(!0),i.adjust({bubble:!0}),i}_.a.Logger.debug("parent model is null!")}},{key:"addComment",value:function(t,e){if(e){var i=new tt({x:16,y:20,text:t.text});return e.addChild(i),e.expand(!0),i.adjust({bubble:!0}),i}_.a.Logger.debug("parent model is null!")}},{key:"loadFromFile",value:function(t){var e=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.clear(i),t&&0!==t.length){var n=null,o=[],s=st.a.parser(!1,{trim:!0,normalize:!0,lowercase:!0,position:!0});s.ontext=function(t){t.length>0&&e.addText({text:t,location:{startLine:s.line,endLine:s.line}},n)},s.oncomment=function(t){t.length>0&&e.addComment({text:t,location:{startLine:s.line,endLine:s.line}},n)},s.onopentag=function(t){n="root"===t.name&&null===n?e.root:e.addElement({tagName:t.name,attributes:o},n);for(var i=s.line,a=0,r=o;a<r.length;a++){var c=r[a];c.location.startLine<i&&(i=c.location.startLine)}n.location().startLine=i},s.onattribute=function(t){o.push({name:t.name,value:t.value,event:"bind"!==t.name&&(0===t.name.indexOf("bind")||0===t.name.indexOf("bind:")),location:{startLine:s.line,endLine:s.line}})},s.onclosetag=function(t){n.location().endLine=s.line,n.adjust(),n=n.parent(),o=[]},s.onend=function(){},s.write(t),s.close(),this.root.adjust(),this.root.expandChildren(!1,!0),i&&this.snapshot(),this.refresh()}}},{key:"loadFromJson",value:function(t){if(this.clear(!1),t.children){var e=this.root,i=!0,n=!1,o=void 0;try{for(var s,a=t.children[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var r=s.value;"text"===r.type?this.addText(r.config,e):"comment"===r.type?this.addComment(r.config,e):this.loadElement(r,e)}}catch(c){n=!0,o=c}finally{try{i||null==a.return||a.return()}finally{if(n)throw o}}}this.root.adjust(),this.refresh()}},{key:"loadElement",value:function(t,e){t.attributes=t.config.properties||[];var i=this.addElement(t.config,e),n=!0,o=!1,s=void 0;try{for(var a,r=t.children[Symbol.iterator]();!(n=(a=r.next()).done);n=!0){var c=a.value;"text"===c.type?this.addText(c.config,i):"comment"===c.type?this.addComment(c.config,i):this.loadElement(c,i)}}catch(h){o=!0,s=h}finally{try{n||null==r.return||r.return()}finally{if(o)throw s}}return i}},{key:"saveToJson",value:function(){return this.root?_.a.Utils.common.clone(this.root.toJson()):{}}},{key:"saveToFile",value:function(){return this.root?this.root.code():"<root></root>"}},{key:"saveToImage",value:function(){}},{key:"hasUndo",value:function(){return this.actions.length>1&&this.actionIndex>0}},{key:"undo",value:function(){if(this.actions.length<=1)this.actionIndex=this.actions.length-1;else if(this.actionIndex<0&&(this.actionIndex=this.actions.length-1),this.actionIndex>0){this.actionIndex-=1;var t=this.actions[this.actionIndex];this.loadFromJson(t,!1)}}},{key:"hasRedo",value:function(){return this.actionIndex>=0&&this.actionIndex<this.actions.length-1}},{key:"redo",value:function(){if(!(this.actionIndex<0)&&this.actionIndex<this.actions.length-1){this.actionIndex+=1;var t=this.actions[this.actionIndex];this.loadFromJson(t,!1)}}},{key:"isReadOnly",value:function(){return this.options.readonly}},{key:"isDebug",value:function(){return this.options.debug}},{key:"rootElement",value:function(){return this.root}},{key:"notifyJump",value:function(t){this.stage.stopDrag(),this.options.events.jump&&this.options.events.jump(t)}},{key:"search",value:function(t){var e={key:t.key.toLowerCase(),hasElem:t.filters.indexOf("element")>=0,hasProp:t.filters.indexOf("property")>=0,hasText:t.filters.indexOf("text")>=0,hasComment:t.filters.indexOf("comment")>=0};return this.root.search(e)}}]),t}(),rt=at,ct={init:function(t){return new rt(t)}},ht=ct,lt=(i("40fb"),i("b8c8")),dt=(i("5374"),{props:["source"],directives:{resize:C.a},components:{codemirror:c["codemirror"]},data:function(){return{split:{ratio:.3,oldRatio:.3,minWidth:300,maxWidth:600},isCollapsed:!0,vscodeExtMode:!1,size:{width:0,height:0,scrollHeight:0},dialogs:{search:{visible:!1,types:[{name:"element",title:"Element"},{name:"property",title:"Property"},{name:"text",title:"Text"},{name:"comment",title:"Comment"}],form:{key:"",status:"0/0",types:["element"],result:[],current:0}},about:{visible:!1,form:{version:"v0.0.2",title:"Outline For Wxml",desc:"A visual preview for Weapp(.wxml)",author:"unique",email:"ods_hla@163.com"}}},scene:{stage:null,debug:!1},scriptEditor:{document:null,code:"",codecrc:0,options:{tabSize:2,mode:"text/javascript",theme:"monokai",lineNumbers:!0,line:!0,matchBrackets:!0,autofocus:!0},visible:!1}}},computed:{hasUndo:function(){return!!this.scene.stage&&this.scene.stage.hasUndo()},hasRedo:function(){return!!this.scene.stage&&this.scene.stage.hasRedo()},menuitemClasses:function(){return["menu-item",this.isCollapsed?"collapsed-menu":""]},splitMin:function(){return this.split.minWidth+"px"},splitMax:function(){return this.split.maxWidth+"px"}},methods:{onResize:function(){this.size.width=this.$el.clientWidth,this.size.height=this.$el.clientHeight,this.size.scrollHeight=this.size.height-80,this.scene.stage.resize(this.size.width,this.size.height)},zoomIn:function(){this.scene.stage.zoomIn()},zoomOut:function(){this.scene.stage.zoomOut()},reset:function(){this.scene.stage.reset()},loadScript:function(t){0!==t.length?this.scene.stage.loadFromFile(t):this.scene.stage.clear()},handleCloseSearch:function(){this.dialogs.search.visible=!1},openBrowser:function(t){window.__callVscode__({cmd:"openurl",info:t},function(t){})},openDocument:function(){window.__callVscode__({cmd:"opendoc"},function(t){})},searchDocument:function(){var t=this.dialogs.search.form.key.replace(/(^\s*)|(\s*$)/g,"");if(this.dialogs.search.form.current=0,t.length>0&&this.dialogs.search.form.types.length>0?this.dialogs.search.form.result=this.scene.stage.search({key:t,filters:this.dialogs.search.form.types}):this.dialogs.search.form.result=[],this.dialogs.search.form.result.length>0){this.dialogs.search.form.current=1;var e=this.dialogs.search.form.result[this.dialogs.search.form.current-1];this.scene.stage.selectNode(e),this.scene.stage.showNode(e)}else this.scene.stage.selectNode(null);this.dialogs.search.form.status="".concat(this.dialogs.search.form.current,"/").concat(this.dialogs.search.form.result.length),this.scene.stage.refresh()},changeSearchTypes:function(t){this.searchDocument()},previousSearch:function(){if(0!==this.dialogs.search.form.result.length){this.dialogs.search.form.current-=1,this.dialogs.search.form.current<=0&&(this.dialogs.search.form.current+=this.dialogs.search.form.result.length),this.dialogs.search.form.status="".concat(this.dialogs.search.form.current,"/").concat(this.dialogs.search.form.result.length);var t=this.dialogs.search.form.result[this.dialogs.search.form.current-1];this.scene.stage.selectNode(t),this.scene.stage.showNode(t),this.scene.stage.refresh()}},nextSearch:function(){if(0!==this.dialogs.search.form.result.length){this.dialogs.search.form.current+=1,this.dialogs.search.form.current>this.dialogs.search.form.result.length&&(this.dialogs.search.form.current-=this.dialogs.search.form.result.length),this.dialogs.search.form.status="".concat(this.dialogs.search.form.current,"/").concat(this.dialogs.search.form.result.length);var t=this.dialogs.search.form.result[this.dialogs.search.form.current-1];this.scene.stage.selectNode(t),this.scene.stage.showNode(t),this.scene.stage.refresh()}},readScript:function(){var t=this;window.__callVscode__({cmd:"loadfile"},function(e){t.scriptEditor.code=e.result.code,t.scriptEditor.codecrc=e.result.crc,t.loadScript("<root>".concat(t.scriptEditor.code,"</root>")||!1)})},updateDebugScript:function(){var t=j.a.Utils.common.trimString(this.scriptEditor.code),e="<root>".concat(t,"</root>");this.loadScript(e),this.scriptEditor.visible=!1},selectNavMenu:function(t){var e=this;"search"===t?this.dialogs.search.visible=!this.dialogs.search.visible:"document"===t?this.openDocument():"refresh"===t?this.readScript():"debug"===t?(this.scriptEditor.visible=!0,this.$nextTick(function(){e.$refs["code"].refresh()})):"about"===t&&(this.dialogs.about.visible=!0)},test:function(){var t='<import src="item.wxml"/><view class="container"><view class="title" bindtap="tap" wx:if="{{condition}}"><text>听写</text>\x3c!-- 注视说明， 测试 --\x3e</view><text class="progress-text">{{progressText}}</text><progress percent="{{progressPercent}}" stroke-width="12" border-radius="6" show-info="{{true}}"/></view>';this.scriptEditor.code=lt(t,{format:"xml",indent_size:2})}},created:function(){this.vscodeExtMode=window.__vscodeExtMode__},mounted:function(){var t=this;this.size.width=this.$el.clientWidth,this.size.height=this.$el.clientHeight,this.size.scrollHeight=this.size.height-80,this.scene.stage=ht.init({container:"scene",width:this.size.width,height:this.size.height,debug:!1,readonly:!0,events:{select:function(t){},search:function(e){t.dialogs.search.visible=!0,e&&(t.dialogs.search.form.types=[].concat(e.nodeType()),"element"===e.nodeType()?t.dialogs.search.form.key=e.tagName():"property"===e.nodeType()?t.dialogs.search.form.key=e.key():"comment"===e.nodeType()?t.dialogs.search.form.key=e.code(!1):"text"===e.nodeType()?t.dialogs.search.form.key=e.code():t.dialogs.search.form.key=""),t.searchDocument()},jump:function(e){t.$nextTick(function(){window.__callVscode__({cmd:"opendoc",info:e},function(t){})})}}}),this.test(),this.readScript()}}),ut=dt,ft=(i("41f1"),Object(m["a"])(ut,S,O,!1,null,"648e0a29",null)),pt=ft.exports,gt={components:{FEEditor:pt},data:function(){return{size:{width:0,height:0}}},directives:{resize:C.a},computed:{},methods:{onContainerResize:function(){this.size.width=this.$el.clientWidth,this.size.height=this.$el.clientHeight}},mounted:function(){this.onContainerResize()}},mt=gt,yt=(i("da9e"),Object(m["a"])(mt,b,x,!1,null,"c6f07626",null)),vt=yt.exports;n["default"].use(k["a"]);for(var kt=new k["a"]({routes:[{path:"/",name:"project",component:vt}]}),bt=i("d876"),xt=(i("21de"),{common:{appTitle:{zh:"可视化Vue模版编辑器",en:"Troll For Vue"},copyright:{zh:"©2019 Unqiue 版权所有",en:"©️2019 Unique All rights reserved."}}}),wt={zh:{},en:{}},Ct=0,zt=Object.entries(xt);Ct<zt.length;Ct++)for(var jt=Object(bt["a"])(zt[Ct],2),St=jt[0],Ot=jt[1],Mt=0,Bt=Object.entries(Ot);Mt<Bt.length;Mt++)for(var Pt=Object(bt["a"])(Bt[Mt],2),_t=Pt[0],Et=Pt[1],Wt=0,Lt=Object.entries(Et);Wt<Lt.length;Wt++){var Tt=Object(bt["a"])(Lt[Wt],2),At=Tt[0],Ht=Tt[1],Ft=wt[At];Ft||(Ft={},wt[At]=Ft);var Nt=Ft[St];Nt||(Nt={},Ft[St]=Nt),Nt[_t]=Ht}var It=wt;window.__vscodeExtMode__=!0;var Rt={};window.__callVscode__=function(t,e){if(window.__vscodeExtMode__){if("string"===typeof t&&(t={cmd:t}),e){var i=Date.now()+""+Math.round(1e5*Math.random());Rt[i]=e,t.cbid=i}window.__vscode__||(window.__vscode__=acquireVsCodeApi()),window.__vscode__.postMessage(t)}},window.addEventListener("message",function(t){var e=t.data;switch(e.cmd){case"vscodeCallback":Rt[e.cbid]&&Rt[e.cbid](e.data),delete Rt[e.cbid];break;default:break}}),n["default"].config.productionTip=!1,n["default"].use(s["a"]),n["default"].use(d.a),n["default"].use(o["a"]),n["default"].use(r.a),n["default"].use(h.a);var Jt=new s["a"]({locale:"en",messages:It});new n["default"]({router:kt,i18n:Jt,render:function(t){return t(v)}}).$mount("#app")},6226:function(t,e,i){},"9e74":function(t,e,i){},da9e:function(t,e,i){"use strict";var n=i("6226"),o=i.n(n);o.a}});
//# sourceMappingURL=app.47456335.js.map